# è¯é¢˜ 4ï¼šå¤šä¸»é¢˜ / æš—é»‘æ¨¡å¼æœ€ä½³å®è·µ

> æœ¬æ–‡æ˜¯ã€Œè®¾è®¡ç³»ç»Ÿä¸ Tailwind CSS æ·±åº¦å®è·µã€ç³»åˆ—çš„ç¬¬å››ç¯‡ï¼Œæ·±å…¥æ¢è®¨å¤šä¸»é¢˜ç³»ç»Ÿçš„æ¶æ„è®¾è®¡ä¸å®ç°æ–¹æ¡ˆã€‚

---

## ä¸€ã€å¤šä¸»é¢˜çš„æœ¬è´¨ï¼šç†è§£é—®é¢˜åŸŸ

### 1.1 ä¸»é¢˜åˆ‡æ¢çš„å‡ ç§åœºæ™¯

| åœºæ™¯ | æè¿° | å¤æ‚åº¦ |
|------|------|--------|
| **æš—é»‘æ¨¡å¼** | åŒä¸€å“ç‰Œçš„ Light / Dark åˆ‡æ¢ | â­â­ |
| **å¤šå“ç‰Œ** | å“ç‰Œ A å’Œå“ç‰Œ B ä½¿ç”¨åŒä¸€å¥—ç»„ä»¶ï¼Œä½†ä¸åŒè§†è§‰ | â­â­â­ |
| **æš—é»‘ + å¤šå“ç‰Œ** | å“ç‰Œ A (Light/Dark) + å“ç‰Œ B (Light/Dark) | â­â­â­â­ |
| **ç”¨æˆ·è‡ªå®šä¹‰** | ç”¨æˆ·å¯è°ƒæ•´ä¸»è‰²ã€å¼ºè°ƒè‰²ç­‰ | â­â­â­â­â­ |

### 1.2 ä¸»é¢˜åˆ‡æ¢çš„æŠ€æœ¯æœ¬è´¨

**ä¸»é¢˜åˆ‡æ¢ = åœ¨ä¸æ”¹å˜ç»„ä»¶ä»£ç çš„å‰æä¸‹ï¼Œåˆ‡æ¢ä¸€ç»„è®¾è®¡å˜é‡çš„å€¼**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç»„ä»¶ä»£ç                               â”‚
â”‚        <Button className="bg-primary" />                â”‚
â”‚                       â”‚                                  â”‚
â”‚                       â–¼                                  â”‚
â”‚              primary æŒ‡å‘ä»€ä¹ˆï¼Ÿ                           â”‚
â”‚                       â”‚                                  â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚         â–¼             â–¼             â–¼                   â”‚
â”‚   Light Theme    Dark Theme    Brand B Theme            â”‚
â”‚   #3B82F6        #60A5FA       #10B981                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®æ´å¯Ÿ**ï¼šç»„ä»¶åªå…³å¿ƒ"è¯­ä¹‰"ï¼ˆ`primary`ï¼‰ï¼Œä¸å…³å¿ƒ"å€¼"ï¼ˆ`#3B82F6`ï¼‰ã€‚ä¸»é¢˜åˆ‡æ¢å°±æ˜¯åˆ‡æ¢è¯­ä¹‰åˆ°å€¼çš„æ˜ å°„ã€‚

---

## äºŒã€ä¸»é¢˜åˆ‡æ¢çš„å››ç§å®ç°æ–¹å¼

### 2.1 æ–¹å¼å¯¹æ¯”

| æ–¹å¼ | åŸç† | è¿è¡Œæ—¶åˆ‡æ¢ | æ€§èƒ½ | æ¨èåœºæ™¯ |
|------|------|:----------:|:----:|----------|
| **CSS å˜é‡åˆ‡æ¢** | ä¿®æ”¹ CSS å˜é‡å€¼ | âœ… | â­â­â­â­â­ | å¤§å¤šæ•°åœºæ™¯ |
| **Class åˆ‡æ¢** | åˆ‡æ¢æ ¹å…ƒç´  class | âœ… | â­â­â­â­â­ | ä¸ Tailwind é…åˆ |
| **å¤šå¥— CSS æ–‡ä»¶** | åŠ è½½ä¸åŒ CSS æ–‡ä»¶ | âš ï¸ éœ€åˆ·æ–° | â­â­â­â­ | å“ç‰Œå®Œå…¨éš”ç¦» |
| **JS ä¸»é¢˜å¯¹è±¡** | ThemeProvider ä¼ é€’ | âœ… | â­â­â­ | CSS-in-JS |

### 2.2 æ¨èæ–¹æ¡ˆï¼šCSS å˜é‡ + Class åˆ‡æ¢

è¿™æ˜¯ Tailwind ç”Ÿæ€çš„æ ‡å‡†æ–¹æ¡ˆï¼Œä¹Ÿæ˜¯æˆ‘æ¨èä½ ä½¿ç”¨çš„æ–¹æ¡ˆã€‚

**æ ¸å¿ƒæ€è·¯**ï¼š
1. ç”¨ CSS å˜é‡å®šä¹‰è¯­ä¹‰ Token
2. ç”¨ä¸åŒçš„ classï¼ˆå¦‚ `.dark`ã€`.brand-b`ï¼‰å®šä¹‰ä¸åŒçš„å˜é‡å€¼
3. åˆ‡æ¢æ ¹å…ƒç´ çš„ class æ¥åˆ‡æ¢ä¸»é¢˜

```css
/* ä¸»é¢˜å˜é‡å®šä¹‰ */
:root {
  --color-bg: #FFFFFF;
  --color-text: #111827;
  --color-primary: #3B82F6;
}

.dark {
  --color-bg: #0F172A;
  --color-text: #F8FAFC;
  --color-primary: #60A5FA;
}
```

```jsx
// åˆ‡æ¢ä¸»é¢˜
document.documentElement.classList.toggle('dark');
```

---

## ä¸‰ã€æš—é»‘æ¨¡å¼å®Œæ•´å®ç°

### 3.1 Tailwind é…ç½®

```javascript
// tailwind.config.js
module.exports = {
  darkMode: 'class',  // å…³é”®ï¼šä½¿ç”¨ class ç­–ç•¥
  theme: {
    colors: {
      // è¯­ä¹‰é¢œè‰²é€šè¿‡ CSS å˜é‡
      background: 'var(--color-bg)',
      foreground: 'var(--color-text)',
      primary: {
        DEFAULT: 'var(--color-primary)',
        foreground: 'var(--color-primary-foreground)',
      },
      muted: {
        DEFAULT: 'var(--color-muted)',
        foreground: 'var(--color-muted-foreground)',
      },
      border: 'var(--color-border)',
      ring: 'var(--color-ring)',
      // ... å…¶ä»–è¯­ä¹‰é¢œè‰²
    }
  }
}
```

### 3.2 CSS å˜é‡å®šä¹‰

```css
/* globals.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* ========== Light Theme ========== */
    /* èƒŒæ™¯ */
    --color-bg: 255 255 255;           /* #FFFFFF */
    --color-bg-secondary: 249 250 251; /* #F9FAFB */
    
    /* æ–‡å­— */
    --color-text: 17 24 39;            /* #111827 */
    --color-text-muted: 107 114 128;   /* #6B7280 */
    
    /* å“ç‰Œ/ä¸»è‰² */
    --color-primary: 59 130 246;       /* #3B82F6 */
    --color-primary-foreground: 255 255 255;
    
    /* é™éŸ³/æ¬¡è¦ */
    --color-muted: 243 244 246;        /* #F3F4F6 */
    --color-muted-foreground: 107 114 128;
    
    /* è¾¹æ¡† */
    --color-border: 229 231 235;       /* #E5E7EB */
    
    /* ç„¦ç‚¹ç¯ */
    --color-ring: 59 130 246;
    
    /* çŠ¶æ€è‰² */
    --color-success: 34 197 94;
    --color-warning: 234 179 8;
    --color-error: 239 68 68;
  }

  .dark {
    /* ========== Dark Theme ========== */
    --color-bg: 15 23 42;              /* #0F172A */
    --color-bg-secondary: 30 41 59;    /* #1E293B */
    
    --color-text: 248 250 252;         /* #F8FAFC */
    --color-text-muted: 148 163 184;   /* #94A3B8 */
    
    --color-primary: 96 165 250;       /* #60A5FA */
    --color-primary-foreground: 15 23 42;
    
    --color-muted: 51 65 85;           /* #334155 */
    --color-muted-foreground: 148 163 184;
    
    --color-border: 51 65 85;
    
    --color-ring: 96 165 250;
    
    --color-success: 74 222 128;
    --color-warning: 250 204 21;
    --color-error: 248 113 113;
  }
}
```

**ä¸ºä»€ä¹ˆç”¨ RGB å€¼è€Œä¸æ˜¯åå…­è¿›åˆ¶ï¼Ÿ**

ä¸ºäº†æ”¯æŒ Tailwind çš„é€æ˜åº¦ä¿®é¥°ç¬¦ï¼š

```jsx
// å¦‚æœç”¨åå…­è¿›åˆ¶ï¼Œæ— æ³•è¿™æ ·å†™
<div className="bg-primary/50" />  // 50% é€æ˜åº¦

// éœ€è¦åœ¨ Tailwind config ä¸­è¿™æ ·é…ç½®
primary: 'rgb(var(--color-primary) / <alpha-value>)',
```

å®Œæ•´çš„æ”¯æŒé€æ˜åº¦çš„é…ç½®ï¼š

```javascript
// tailwind.config.js
module.exports = {
  theme: {
    colors: {
      background: 'rgb(var(--color-bg) / <alpha-value>)',
      foreground: 'rgb(var(--color-text) / <alpha-value>)',
      primary: {
        DEFAULT: 'rgb(var(--color-primary) / <alpha-value>)',
        foreground: 'rgb(var(--color-primary-foreground) / <alpha-value>)',
      },
      muted: {
        DEFAULT: 'rgb(var(--color-muted) / <alpha-value>)',
        foreground: 'rgb(var(--color-muted-foreground) / <alpha-value>)',
      },
      border: 'rgb(var(--color-border) / <alpha-value>)',
    }
  }
}
```

### 3.3 ä¸»é¢˜åˆ‡æ¢ Hook

```typescript
// hooks/useTheme.ts
import { useEffect, useState } from 'react';

type Theme = 'light' | 'dark' | 'system';

export function useTheme() {
  const [theme, setTheme] = useState<Theme>(() => {
    // ä» localStorage è¯»å–ï¼Œé»˜è®¤è·Ÿéšç³»ç»Ÿ
    if (typeof window !== 'undefined') {
      return (localStorage.getItem('theme') as Theme) || 'system';
    }
    return 'system';
  });

  useEffect(() => {
    const root = document.documentElement;
    
    const applyTheme = (newTheme: Theme) => {
      if (newTheme === 'dark') {
        root.classList.add('dark');
      } else if (newTheme === 'light') {
        root.classList.remove('dark');
      } else {
        // system: è·Ÿéšç³»ç»Ÿåå¥½
        const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        root.classList.toggle('dark', systemDark);
      }
    };

    applyTheme(theme);
    localStorage.setItem('theme', theme);

    // ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–
    if (theme === 'system') {
      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
      const handler = (e: MediaQueryListEvent) => {
        root.classList.toggle('dark', e.matches);
      };
      mediaQuery.addEventListener('change', handler);
      return () => mediaQuery.removeEventListener('change', handler);
    }
  }, [theme]);

  return { theme, setTheme };
}
```

### 3.4 ä¸»é¢˜åˆ‡æ¢ç»„ä»¶

```tsx
// components/ThemeToggle.tsx
import { useTheme } from '@/hooks/useTheme';

const themes = [
  { value: 'light', label: 'æµ…è‰²', icon: 'â˜€ï¸' },
  { value: 'dark', label: 'æ·±è‰²', icon: 'ğŸŒ™' },
  { value: 'system', label: 'ç³»ç»Ÿ', icon: 'ğŸ’»' },
] as const;

export function ThemeToggle() {
  const { theme, setTheme } = useTheme();

  return (
    <div className="flex gap-1 p-1 bg-muted rounded-lg">
      {themes.map(({ value, label, icon }) => (
        <button
          key={value}
          onClick={() => setTheme(value)}
          className={`
            px-3 py-1.5 rounded-md text-sm font-medium transition-colors
            ${theme === value 
              ? 'bg-background text-foreground shadow-sm' 
              : 'text-muted-foreground hover:text-foreground'
            }
          `}
        >
          <span className="mr-1">{icon}</span>
          {label}
        </button>
      ))}
    </div>
  );
}
```

### 3.5 é˜²æ­¢é—ªçƒï¼ˆFOUCï¼‰

åœ¨ SSR/SSG åœºæ™¯ä¸‹ï¼Œé¡µé¢åŠ è½½æ—¶å¯èƒ½ä¼šé—ªçƒã€‚è§£å†³æ–¹æ¡ˆæ˜¯åœ¨ `<head>` ä¸­å†…è”ä¸€æ®µè„šæœ¬ï¼š

```html
<!-- åœ¨ Next.js ä¸­ï¼Œæ”¾åœ¨ _document.tsx æˆ– layout.tsx -->
<head>
  <script dangerouslySetInnerHTML={{
    __html: `
      (function() {
        const theme = localStorage.getItem('theme') || 'system';
        const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        if (theme === 'dark' || (theme === 'system' && systemDark)) {
          document.documentElement.classList.add('dark');
        }
      })();
    `
  }} />
</head>
```

---

## å››ã€å¤šå“ç‰Œä¸»é¢˜å®ç°

### 4.1 åœºæ™¯è¯´æ˜

å‡è®¾ä½ çš„ç»„ä»¶åº“éœ€è¦æ”¯æŒä¸¤ä¸ªå“ç‰Œï¼š
- **Brand A**ï¼šè“è‰²ç³»ï¼Œç§‘æŠ€æ„Ÿ
- **Brand B**ï¼šç»¿è‰²ç³»ï¼Œè‡ªç„¶æ„Ÿ

æ¯ä¸ªå“ç‰Œéƒ½éœ€è¦ Light å’Œ Dark ä¸¤ç§æ¨¡å¼ã€‚

### 4.2 æ¶æ„è®¾è®¡

```
ä¸»é¢˜çŸ©é˜µï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚    Light     â”‚     Dark     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Brand A    â”‚  A-Light     â”‚   A-Dark     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Brand B    â”‚  B-Light     â”‚   B-Dark     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å®ç°ç­–ç•¥ï¼šå“ç‰Œ class + æ¨¡å¼ class ç»„åˆ

<html class="brand-a dark">      â†’ Brand A Dark
<html class="brand-b">           â†’ Brand B Light
<html class="brand-a">           â†’ Brand A Light
<html class="brand-b dark">      â†’ Brand B Dark
```

### 4.3 CSS å˜é‡ç»„ç»‡

```css
/* globals.css */
@layer base {
  /* ================================================
     Brand A (é»˜è®¤å“ç‰Œ)
     ================================================ */
  :root,
  .brand-a {
    /* Light Mode */
    --color-primary: 59 130 246;       /* Blue-500 */
    --color-primary-hover: 37 99 235;  /* Blue-600 */
    --color-primary-foreground: 255 255 255;
    
    --color-accent: 99 102 241;        /* Indigo-500 */
    
    --color-bg: 255 255 255;
    --color-bg-secondary: 248 250 252;
    --color-text: 15 23 42;
    --color-text-muted: 100 116 139;
    --color-border: 226 232 240;
  }

  .brand-a.dark,
  :root.dark {
    /* Brand A Dark Mode */
    --color-primary: 96 165 250;       /* Blue-400 */
    --color-primary-hover: 147 197 253;
    --color-primary-foreground: 15 23 42;
    
    --color-accent: 129 140 248;
    
    --color-bg: 15 23 42;
    --color-bg-secondary: 30 41 59;
    --color-text: 248 250 252;
    --color-text-muted: 148 163 184;
    --color-border: 51 65 85;
  }

  /* ================================================
     Brand B
     ================================================ */
  .brand-b {
    /* Light Mode */
    --color-primary: 16 185 129;       /* Emerald-500 */
    --color-primary-hover: 5 150 105;  /* Emerald-600 */
    --color-primary-foreground: 255 255 255;
    
    --color-accent: 20 184 166;        /* Teal-500 */
    
    --color-bg: 255 255 255;
    --color-bg-secondary: 240 253 250;
    --color-text: 17 24 39;
    --color-text-muted: 107 114 128;
    --color-border: 209 250 229;
  }

  .brand-b.dark {
    /* Brand B Dark Mode */
    --color-primary: 52 211 153;       /* Emerald-400 */
    --color-primary-hover: 110 231 183;
    --color-primary-foreground: 17 24 39;
    
    --color-accent: 45 212 191;
    
    --color-bg: 6 78 59;               /* æ·±ç»¿èƒŒæ™¯ */
    --color-bg-secondary: 4 120 87;
    --color-text: 236 253 245;
    --color-text-muted: 167 243 208;
    --color-border: 5 150 105;
  }
}
```

### 4.4 ä¸»é¢˜åˆ‡æ¢ Hookï¼ˆå¤šå“ç‰Œç‰ˆï¼‰

```typescript
// hooks/useTheme.ts
import { useEffect, useState } from 'react';

type ColorMode = 'light' | 'dark' | 'system';
type Brand = 'brand-a' | 'brand-b';

interface ThemeConfig {
  colorMode: ColorMode;
  brand: Brand;
}

const DEFAULT_THEME: ThemeConfig = {
  colorMode: 'system',
  brand: 'brand-a',
};

export function useTheme() {
  const [config, setConfig] = useState<ThemeConfig>(() => {
    if (typeof window !== 'undefined') {
      const saved = localStorage.getItem('theme-config');
      return saved ? JSON.parse(saved) : DEFAULT_THEME;
    }
    return DEFAULT_THEME;
  });

  useEffect(() => {
    const root = document.documentElement;
    
    // åº”ç”¨å“ç‰Œ
    root.classList.remove('brand-a', 'brand-b');
    root.classList.add(config.brand);
    
    // åº”ç”¨è‰²å½©æ¨¡å¼
    const applyColorMode = (mode: ColorMode) => {
      if (mode === 'dark') {
        root.classList.add('dark');
      } else if (mode === 'light') {
        root.classList.remove('dark');
      } else {
        const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        root.classList.toggle('dark', systemDark);
      }
    };

    applyColorMode(config.colorMode);
    localStorage.setItem('theme-config', JSON.stringify(config));

    // ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–
    if (config.colorMode === 'system') {
      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
      const handler = (e: MediaQueryListEvent) => {
        root.classList.toggle('dark', e.matches);
      };
      mediaQuery.addEventListener('change', handler);
      return () => mediaQuery.removeEventListener('change', handler);
    }
  }, [config]);

  const setColorMode = (colorMode: ColorMode) => {
    setConfig(prev => ({ ...prev, colorMode }));
  };

  const setBrand = (brand: Brand) => {
    setConfig(prev => ({ ...prev, brand }));
  };

  return {
    colorMode: config.colorMode,
    brand: config.brand,
    setColorMode,
    setBrand,
  };
}
```

### 4.5 å¤šå“ç‰Œåˆ‡æ¢ç»„ä»¶

```tsx
// components/ThemePanel.tsx
import { useTheme } from '@/hooks/useTheme';

export function ThemePanel() {
  const { colorMode, brand, setColorMode, setBrand } = useTheme();

  return (
    <div className="p-4 bg-background border border-border rounded-lg space-y-4">
      {/* å“ç‰Œåˆ‡æ¢ */}
      <div>
        <label className="block text-sm font-medium text-foreground mb-2">
          å“ç‰Œä¸»é¢˜
        </label>
        <div className="flex gap-2">
          <button
            onClick={() => setBrand('brand-a')}
            className={`
              flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all
              ${brand === 'brand-a'
                ? 'bg-primary text-primary-foreground'
                : 'bg-muted text-muted-foreground hover:bg-muted/80'
              }
            `}
          >
            Brand A (è“è‰²)
          </button>
          <button
            onClick={() => setBrand('brand-b')}
            className={`
              flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all
              ${brand === 'brand-b'
                ? 'bg-primary text-primary-foreground'
                : 'bg-muted text-muted-foreground hover:bg-muted/80'
              }
            `}
          >
            Brand B (ç»¿è‰²)
          </button>
        </div>
      </div>

      {/* è‰²å½©æ¨¡å¼åˆ‡æ¢ */}
      <div>
        <label className="block text-sm font-medium text-foreground mb-2">
          è‰²å½©æ¨¡å¼
        </label>
        <div className="flex gap-2">
          {[
            { value: 'light', label: 'æµ…è‰²' },
            { value: 'dark', label: 'æ·±è‰²' },
            { value: 'system', label: 'è·Ÿéšç³»ç»Ÿ' },
          ].map(({ value, label }) => (
            <button
              key={value}
              onClick={() => setColorMode(value as any)}
              className={`
                flex-1 px-3 py-2 rounded-md text-sm font-medium transition-all
                ${colorMode === value
                  ? 'bg-foreground text-background'
                  : 'bg-muted text-muted-foreground hover:bg-muted/80'
                }
              `}
            >
              {label}
            </button>
          ))}
        </div>
      </div>
    </div>
  );
}
```

---

## äº”ã€Token æ–‡ä»¶ç»„ç»‡ï¼šæœ€ä½³å®è·µ

### 5.1 æ¨èç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ tokens/
â”‚   â”‚   â”œâ”€â”€ primitive.css      # åŸå§‹å€¼ï¼ˆè°ƒè‰²æ¿ã€åˆ»åº¦ï¼‰
â”‚   â”‚   â”œâ”€â”€ semantic-light.css # è¯­ä¹‰å±‚ - Light
â”‚   â”‚   â”œâ”€â”€ semantic-dark.css  # è¯­ä¹‰å±‚ - Dark
â”‚   â”‚   â”œâ”€â”€ brand-a.css        # å“ç‰Œ A è¦†ç›–
â”‚   â”‚   â””â”€â”€ brand-b.css        # å“ç‰Œ B è¦†ç›–
â”‚   â””â”€â”€ globals.css            # å…¥å£ï¼Œå¯¼å…¥æ‰€æœ‰ token
â”œâ”€â”€ components/
â””â”€â”€ tailwind.config.js
```

### 5.2 åˆ†æ–‡ä»¶ç»„ç»‡ç¤ºä¾‹

```css
/* styles/tokens/primitive.css */
/* è°ƒè‰²æ¿ - æ‰€æœ‰ä¸»é¢˜å…±äº« */
:root {
  /* Blue palette */
  --palette-blue-50: 239 246 255;
  --palette-blue-100: 219 234 254;
  --palette-blue-500: 59 130 246;
  --palette-blue-600: 37 99 235;
  
  /* Green palette */
  --palette-green-50: 240 253 244;
  --palette-green-500: 34 197 94;
  --palette-green-600: 22 163 74;
  
  /* Gray palette */
  --palette-gray-50: 249 250 251;
  --palette-gray-100: 243 244 246;
  --palette-gray-500: 107 114 128;
  --palette-gray-900: 17 24 39;
  
  /* Spacing scale */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
}
```

```css
/* styles/tokens/semantic-light.css */
:root {
  /* è¯­ä¹‰é¢œè‰² - Light æ¨¡å¼ */
  --color-bg: var(--palette-gray-50);
  --color-bg-secondary: 255 255 255;
  --color-text: var(--palette-gray-900);
  --color-text-muted: var(--palette-gray-500);
  --color-border: var(--palette-gray-200);
}
```

```css
/* styles/tokens/semantic-dark.css */
.dark {
  /* è¯­ä¹‰é¢œè‰² - Dark æ¨¡å¼ */
  --color-bg: 15 23 42;
  --color-bg-secondary: 30 41 59;
  --color-text: 248 250 252;
  --color-text-muted: 148 163 184;
  --color-border: 51 65 85;
}
```

```css
/* styles/tokens/brand-a.css */
:root,
.brand-a {
  --color-primary: var(--palette-blue-500);
  --color-primary-hover: var(--palette-blue-600);
  --color-primary-foreground: 255 255 255;
}

.brand-a.dark {
  --color-primary: 96 165 250;
  --color-primary-hover: 147 197 253;
  --color-primary-foreground: 15 23 42;
}
```

```css
/* styles/tokens/brand-b.css */
.brand-b {
  --color-primary: var(--palette-green-500);
  --color-primary-hover: var(--palette-green-600);
  --color-primary-foreground: 255 255 255;
}

.brand-b.dark {
  --color-primary: 74 222 128;
  --color-primary-hover: 134 239 172;
  --color-primary-foreground: 17 24 39;
}
```

```css
/* styles/globals.css */
@import './tokens/primitive.css';
@import './tokens/semantic-light.css';
@import './tokens/semantic-dark.css';
@import './tokens/brand-a.css';
@import './tokens/brand-b.css';

@tailwind base;
@tailwind components;
@tailwind utilities;
```

---

## å…­ã€è¿è¡Œæ—¶åˆ‡æ¢ vs æ„å»ºæ—¶ç”Ÿæˆ

### 6.1 ä¸¤ç§ç­–ç•¥å¯¹æ¯”

| ç»´åº¦ | è¿è¡Œæ—¶åˆ‡æ¢ | æ„å»ºæ—¶ç”Ÿæˆ |
|------|------------|------------|
| **å®ç°** | CSS å˜é‡ + class åˆ‡æ¢ | å¤šå¥— CSS æ–‡ä»¶ |
| **åˆ‡æ¢é€Ÿåº¦** | å³æ—¶ | éœ€é‡æ–°åŠ è½½ |
| **é¦–å±æ€§èƒ½** | ç¨å¤§ï¼ˆåŒ…å«æ‰€æœ‰ä¸»é¢˜å˜é‡ï¼‰ | æ›´å°ï¼ˆåªåŠ è½½å½“å‰ä¸»é¢˜ï¼‰ |
| **é€‚ç”¨åœºæ™¯** | ç”¨æˆ·å¯åˆ‡æ¢ä¸»é¢˜ | å“ç‰Œå®Œå…¨éš”ç¦» |
| **ç»´æŠ¤æˆæœ¬** | ä½ | é«˜ |

### 6.2 æˆ‘çš„å»ºè®®

**å¯¹äºä½ çš„åœºæ™¯ï¼ˆä¸ªäººç»„ä»¶åº“ + å¤šä¸»é¢˜ï¼‰ï¼Œé€‰æ‹©è¿è¡Œæ—¶åˆ‡æ¢**ã€‚

åŸå› ï¼š
1. ä½ éœ€è¦ç”¨æˆ·èƒ½åœ¨è¿è¡Œæ—¶åˆ‡æ¢ä¸»é¢˜
2. CSS å˜é‡çš„æ€§èƒ½å½±å“å¯ä»¥å¿½ç•¥
3. ç»´æŠ¤æˆæœ¬ä½ï¼Œä¸€å¥—ä»£ç å¤šå¥—ä¸»é¢˜

**ä»€ä¹ˆæ—¶å€™ç”¨æ„å»ºæ—¶ç”Ÿæˆï¼Ÿ**
- å¤šä¸ªå®Œå…¨ç‹¬ç«‹çš„äº§å“ï¼ˆä¸éœ€è¦è¿è¡Œæ—¶åˆ‡æ¢ï¼‰
- å¯¹é¦–å±æ€§èƒ½æœ‰æè‡´è¦æ±‚
- å®‰å…¨è€ƒè™‘ï¼ˆä¸å¸Œæœ›å…¶ä»–å“ç‰Œçš„æ ·å¼å‡ºç°åœ¨ä»£ç ä¸­ï¼‰

---

## ä¸ƒã€é«˜çº§æŠ€å·§

### 7.1 CSS å˜é‡çš„å“åº”å¼è¦†ç›–

```css
:root {
  --page-padding: 1rem;
}

@media (min-width: 768px) {
  :root {
    --page-padding: 2rem;
  }
}

@media (min-width: 1024px) {
  :root {
    --page-padding: 3rem;
  }
}
```

### 7.2 ç»„ä»¶çº§ä¸»é¢˜è¦†ç›–

```jsx
// å±€éƒ¨è¦†ç›–ä¸»é¢˜ï¼ˆä¾‹å¦‚ï¼šæ·±è‰²å¡ç‰‡åœ¨æµ…è‰²é¡µé¢ä¸­ï¼‰
function DarkCard({ children }) {
  return (
    <div 
      className="dark bg-background text-foreground p-4 rounded-lg"
      style={{
        // æˆ–è€…ç”¨å†…è”å˜é‡è¦†ç›–
        '--color-bg': '15 23 42',
        '--color-text': '248 250 252',
      }}
    >
      {children}
    </div>
  );
}
```

### 7.3 ä¸»é¢˜è¿‡æ¸¡åŠ¨ç”»

```css
/* å…¨å±€ä¸»é¢˜åˆ‡æ¢åŠ¨ç”» */
:root {
  color-scheme: light;
}

.dark {
  color-scheme: dark;
}

/* å¹³æ»‘è¿‡æ¸¡ */
*,
*::before,
*::after {
  transition: background-color 0.2s ease, 
              border-color 0.2s ease,
              color 0.2s ease;
}

/* æ’é™¤ä¸éœ€è¦è¿‡æ¸¡çš„å…ƒç´  */
.no-transition,
.no-transition *,
.no-transition *::before,
.no-transition *::after {
  transition: none !important;
}
```

### 7.4 æ£€æµ‹ç”¨æˆ·ç³»ç»Ÿä¸»é¢˜åå¥½

```typescript
// æ£€æµ‹ç”¨æˆ·æ˜¯å¦åå¥½æš—è‰²
const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

// æ£€æµ‹ç”¨æˆ·æ˜¯å¦åå¥½å‡å°‘åŠ¨ç”»
const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

// æ£€æµ‹ç”¨æˆ·æ˜¯å¦åå¥½é«˜å¯¹æ¯”åº¦
const prefersContrast = window.matchMedia('(prefers-contrast: more)').matches;
```

---

## å…«ã€æœ¬è½®å°ç»“

### æ ¸å¿ƒæ¶æ„

```
å¤šä¸»é¢˜å®ç°æ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   tailwind.config.js                    â”‚
â”‚         colors: { primary: 'rgb(var(--color-primary))' }â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ å¼•ç”¨
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CSS å˜é‡å±‚                            â”‚
â”‚  :root { --color-primary: 59 130 246 }                  â”‚
â”‚  .dark { --color-primary: 96 165 250 }                  â”‚
â”‚  .brand-b { --color-primary: 34 197 94 }                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ åˆ‡æ¢
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HTML æ ¹å…ƒç´                            â”‚
â”‚  <html class="brand-a dark">                            â”‚
â”‚  é€šè¿‡ JS åŠ¨æ€åˆ‡æ¢ class                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®å®è·µ

1. **ç”¨ CSS å˜é‡å­˜å‚¨è¯­ä¹‰ Token**ï¼Œç”¨ class åˆ‡æ¢å˜é‡å€¼
2. **ä½¿ç”¨ RGB æ ¼å¼**ä»¥æ”¯æŒ Tailwind çš„é€æ˜åº¦ä¿®é¥°ç¬¦
3. **å“ç‰Œ + æ¨¡å¼åŒç»´åº¦**ï¼š`.brand-a.dark` ç»„åˆä½¿ç”¨
4. **é˜²æ­¢ FOUC**ï¼šåœ¨ `<head>` ä¸­å†…è”ä¸»é¢˜æ£€æµ‹è„šæœ¬
5. **åˆ†æ–‡ä»¶ç»„ç»‡**ï¼šprimitive / semantic / brand åˆ†ç¦»

### æ–‡ä»¶æ¸…å•

ä½ éœ€è¦åˆ›å»ºçš„æ–‡ä»¶ï¼š
- `tailwind.config.js` - å¼•ç”¨ CSS å˜é‡
- `styles/globals.css` - å®šä¹‰æ‰€æœ‰ä¸»é¢˜çš„ CSS å˜é‡
- `hooks/useTheme.ts` - ä¸»é¢˜åˆ‡æ¢é€»è¾‘
- `components/ThemeToggle.tsx` - ä¸»é¢˜åˆ‡æ¢ UI

---

## æœ¬è½®æ€è€ƒé—®é¢˜

åœ¨è¿›å…¥ä¸‹ä¸€ä¸ªè¯é¢˜ï¼ˆå·¥ç¨‹åŒ–è½åœ°æ–¹æ¡ˆï¼‰ä¹‹å‰ï¼š

1. **ä½ çš„å¤šä¸»é¢˜éœ€æ±‚å…·ä½“æ˜¯å“ªç§ï¼Ÿ** çº¯æš—é»‘æ¨¡å¼ï¼Ÿè¿˜æ˜¯éœ€è¦å¤šå“ç‰Œï¼Ÿ

2. **ä½ çš„é¡¹ç›®æ˜¯å¦éœ€è¦ SSRï¼ˆå¦‚ Next.jsï¼‰ï¼Ÿ** è¿™ä¼šå½±å“é˜²é—ªçƒæ–¹æ¡ˆçš„å®ç°ã€‚

3. **è¿™å¥— CSS å˜é‡ + class åˆ‡æ¢çš„æ–¹æ¡ˆï¼Œä½ è§‰å¾—å¤æ‚åº¦å¯æ¥å—å—ï¼Ÿ**


